{% extends "base.html" %}

{% block title %}Monitoring Data Sensor{% endblock %}

{% block head_scripts %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='style_monitoring.css') }}">
{% endblock %}

{% block content %}
  <div class="content">
    <div class="grid-container">
      {% set sensor_names = ['Suhu', 'Tekanan', 'Kelembapan', 'Magnetik'] %}
      {% for name in sensor_names %}
      <div class="card-item {% if loop.index == 4 %}full-width{% endif %}">
        <div class="text-container">
          <h2>Data Sensor {{ name }}</h2>
          <p>Grafik pembacaan sensor {{ name.lower() }}.</p>
        </div>
        <div class="media-container">
          <canvas id="chart{{ loop.index }}"></canvas>
        </div>
      </div>
      {% endfor %}
      <div class="card-item full-width">
        <div class="text-container">
          <h2>Data Sensor Seismik</h2>
          <p>Grafik pembacaan sensor seismik</p>
        </div>
        <div class="media-container">
          <canvas id="seismicChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <div class="map-monitor">
    <div class="map-container">
      <div class="monitoring-map">
        <div class="text-map-container">
          <h2>Peta Lokasi Pengamatan</h2>
        </div>
        <div class="gunung-map">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d9403.033984956512!2d112.52505014914267!3d-7.737863836570892!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e78796640c56849%3A0x34153bef24d4f2b5!2sAgro%20Technopark%20Universitas%20Brawijaya%20Cangar!5e0!3m2!1sid!2sid!4v1760110361428!5m2!1sid!2sid" 
            width="100%"
            height="450"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </div>
    </div>
    <div class="side-text-map">
      <div class="text-map-container">
        <h2>Agro Technopark Brawijaya Cangar</h2>
      </div>
      <div class="side-text-contain">
       <p>Agro Technopark (ATP) Cangar adalah unit usaha di bawah naungan Universitas Brawijaya yang berlokasi di Cangar, Kota Batu, Jawa Timur. Kawasan ini memiliki fungsi utama sebagai pusat produksi produk pertanian, khususnya sayuran, serta menyediakan layanan jasa sewa lahan untuk penelitian, pelatihan, dan diseminasi teknologi. ATP Cangar juga dikembangkan sebagai kawasan eduwisata yang memanfaatkan potensi alamnya, seperti udara pegunungan yang sejuk, pemandian air panas, dan lanskap alami yang indah.</p>
      </div>
    </div>
  </div>

{% endblock %}

{% block scripts %}
  <script>
    window.weatherData = {{ weather_data | tojson }};
    window.magneticData = {{ magnetic_data | tojson }};
    window.seismicData = {{ seismic_data | tojson }}; 
  </script>
  <script src="{{ url_for('static', filename='js/charts.js') }}"></script>
  <script src="{{ url_for('static', filename='js/seismic_chart.js') }}"></script>
{% endblock %}
